{{ include('_jsForms.html.twig') }}

<div><p></p></div>

{{ form_start(form) }}

<div class="form-row">
    <div class="form-group col-md-6">
        {{ form_label(form.username) }}
        {{ form_errors(form.username) }}
        {{ form_widget(form.username, {
            'attr': {
                'placeholder': 'User',
                'class': 'form-control',
            }
        })
        }}
        {{ form_help(form.username) }}
    </div>
    <div class="form-group col-md-6">
        {{ form_label(form.password) }}
        {{ form_errors(form.password) }}
        {{ form_widget(form.password, {
            'attr': {
                'placeholder': 'Password',
                'class': 'form-control',
            }
        })
        }}
        {{ form_help(form.password) }}
    </div>
</div>
<div class="form-row">
    <div class="form-group col-md-6">
        {{ form_label(form.name) }}
        {{ form_errors(form.name) }}
        {{ form_widget(form.name, {
            'attr': {
                'placeholder': 'Name',
                'class': 'form-control',
            }
        })
        }}
        {{ form_help(form.name) }}
    </div>
    <div class="form-group col-md-6">
        {{ form_label(form.email) }}
        {{ form_errors(form.email) }}
        {{ form_widget(form.email, {
            'attr': {
                'placeholder': 'Email',
                'class': 'form-control',
            }
        })
        }}
        {{ form_help(form.email) }}
    </div>
</div>
<div class="card card-secondary">
    <div class="card-header">
        <h3 class="card-title">Roles</h3>
    </div>
    <div class="card-body">
        <div class="form-row">
            <div class="form-group col-md-6">
                {% if form.vars.data is null %}
                    {% set id = 'new' %}
                {% else %}
                    {% set id = form.vars.data.id %}
                {% endif %}
                {{ form_label(form.roles) }}
                {{ form_errors(form.roles) }}
                {{ form_widget(form.roles, {
                        'attr': {
                            'placeholder': 'Effective Roles',
                            'class': 'form-control single-select2',
                            'multiple': 'multiple',
                            'required': form.roles.vars.required,
                        },
                        'id': 'user_roles_' ~ id
                    })
                }}
                {{ form_help(form.roles) }}

                <p></p>

                {% if form.vars.data is null %}
                    {% set id = 'new' %}
                {% else %}
                    {% set id = form.vars.data.id %}
                {% endif %}
                
                {{ form_label(form.rolesFixed) }}
                {{ form_errors(form.rolesFixed) }}
                {{ form_widget(form.rolesFixed, {
                        'attr': {
                            'placeholder': 'Fixed Roles',
                            'class': 'form-control single-select2',
                            'multiple': 'multiple',
                            'required': form.rolesFixed.vars.required,
                        },
                        'id': 'user_rolesFixed_' ~ id
                    })
                }}
                {{ form_help(form.roles) }}
            </div>
            <div class="form-group col-md-6">
                
            </div>
        </div>
    </div>
</div>
{% if is_granted('ROLE_ADMIN') or form.vars.data.id == app.user.id %}
    <hr>
    <div class="row">
        <div class="col col-md-12">
            <div class="btn-group">
                {% if form.name.vars.value != '' %}
                    <button class="btn bg-green"><i class="fa fa-save"></i> Save</button>
                {% else %}
                    <button class="btn bg-green"><i class="fa fa-save"></i> Create New</button>
                {% endif %}
            </div>
        </div>
    </div>
{% endif %}
{{ form_end(form) }}